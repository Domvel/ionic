@import "./segment";
@import "./segment.ios.vars";

// iOS Segment
// --------------------------------------------------

:host {
  --background: #{$segment-button-ios-background-color};
  --background-checked: #{$segment-button-ios-background-color-checked};
  --background-hover: #{$segment-button-ios-background-color-hover};
  --background-activated: #{$segment-button-ios-background-color-activated};
  --background-checked: #{$segment-button-ios-background-color-checked};
  --color: initial;
  --color-checked: initial;
  --indicator-color: transparent;
  --indicator-transition: #{$segment-button-ios-transition-animated};

  @include border-radius($segment-ios-border-radius);

  background: #{$segment-ios-background-color};

  overflow: hidden;
}

:host(.segment-disabled) {
  opacity: $segment-button-ios-opacity-disabled;
}


// Segment: Color
// --------------------------------------------------

:host(.ion-color) {
  background: #{current-color(base, 0.065)};
  // color: #{current-color(base)};
}

:host(.ion-color)::slotted(ion-segment-button) {
  // --border-color: #{current-color(base)};

  // color: #{current-color(base)};
}

// :host(.ion-color)::slotted(.activated) {
//   background: #{current-color(base, .16)};
//   color: #{current-color(base)};
// }

// :host(.ion-color)::slotted(.segment-button-checked.activated),
:host(.ion-color)::slotted(.segment-button-checked) {
  // color: #{current-color(base)};
}

// :host(.ion-color)::slotted(.segment-button-disabled) {
//   color: #{current-color(base, $segment-ios-opacity-disabled)};
// }

// :host(.ion-color)::slotted(.segment-button-checked.segment-button-disabled) {
//   color: #{current-color(contrast, $segment-ios-opacity-disabled)};
// }

// @media (any-hover: hover) {
//   :host(.ion-color)::slotted(ion-segment-button:hover:not(.segment-button-checked)) {
//     background: #{current-color(base, .1)};
//   }
// }


// Segment: Default Toolbar
// --------------------------------------------------

:host-context(ion-toolbar) {
  @include margin(0, auto);

  width: auto;
}

:host-context(ion-toolbar:not(.ion-color)):not(.ion-color) {
  background: #{var(--ion-toolbar-color-unchecked, $segment-ios-background-color)};
}

:host-context(ion-toolbar:not(.ion-color)):not(.ion-color)::slotted(.segment-button-checked) {
  // background: #{var(--ion-toolbar-color-checked, var(--background-checked))};

  color: #{var(--ion-toolbar-background, var(--color-checked))};
}


// Segment: Color Toolbar
// --------------------------------------------------

:host-context(ion-toolbar.ion-color):not(.ion-color) {
  --background-checked: #{current-color(base)};
  background: #{current-color(contrast, 0.11)};
}

:host-context(ion-toolbar.ion-color):not(.ion-color)::slotted(.segment-button-checked) {
  // --color: #{current-color(contrast)};
  // --color-checked: #{current-color(base)};
  // --border-color: #{current-color(contrast)};
}


// Segment: Checked Indicator
// --------------------------------------------------

.segment-checked-indicator {
  @include padding($segment-button-ios-margin);
  @include position(0, 0, 0, 0);
}

.segment-checked-indicator-background {
  @include border-radius($segment-button-ios-border-radius);

  background: var(--background-checked);

  box-shadow: $segment-button-ios-box-shadow-checked;
}


// Segment: Checked Borders
// --------------------------------------------------

::slotted(.segment-button-checked)::before,
::slotted(.segment-button-checked) + ion-segment-button::before {
  opacity: 0;
}
